mindmap
  root((VULCAN Pipeline))
    â–¶ï¸ **orchestrator.py**
      (main() loop)
      ğŸ› ï¸ init_run()
      ğŸ’¾ **SessionState** (Initialized)
      
      %% --- Phase 1: Insight Discovery ---
      **Phase 1: Insight Discovery Loop**
        ğŸ’¡ **Discovery Team GroupChat**
          (Managed by `SmartGroupChatManager`)
          ğŸ“ Uses `discovery_team/*.j2` prompts
          
          ğŸ’¡ **DataRepresenter**
            ğŸ› ï¸ create_analysis_view()
            ğŸ’¾ Writes to generated_views.json
          
          ğŸ’¡ **QuantitativeAnalyst**
            ğŸ› ï¸ run_sql_query()
            ğŸ› ï¸ vision_tool()
            ğŸ› ï¸ save_plot() (via tools.py)
            ğŸ› ï¸ add_insight_to_report()
              ğŸ’¾ Writes Insight to SessionState
              
          ğŸ’¡ **PatternSeeker**
            ğŸ› ï¸ run_sql_query()
            ğŸ› ï¸ add_insight_to_report()
            
      %% --- Phase 2: Strategy & Generation ---
      **Phase 2: Strategy & Generation**
        ğŸ’¡ **Strategy Team GroupChat**
          ğŸ“ Uses `strategy_team/*.j2` prompts
          
          ğŸ’¡ **HypothesisAgent**
            (Proposes hypotheses)
            
          ğŸ’¡ **StrategistAgent**
            (Critiques for value)
            
          ğŸ’¡ **EngineerAgent**
            (Critiques for feasibility)
            ğŸ› ï¸ finalize_hypotheses()
              ğŸ’¾ Writes Hypothesis to SessionState
              
        â–¶ï¸ **orchestration/ideation.py**
          ğŸ’¡ **FeatureIdeationAgent**
            ğŸ“ Uses `feature_ideator.j2`
            ğŸ’¾ Reads Hypotheses from SessionState
            ğŸ’¾ Writes CandidateFeatures to SessionState
            
        â–¶ï¸ **orchestration/realization.py**
          ğŸ’¡ **FeatureRealizationAgent**
            ğŸ“ Uses `feature_realization.j2`
            ğŸ’¾ Reads CandidateFeatures from SessionState
            ğŸ’¾ Writes RealizedFeatures to SessionState
            ğŸ› ï¸ Uses its own sandboxed test
            
        ğŸ’¡ **OptimizationAgent (V2)**
          ğŸ’¾ Reads RealizedFeatures from SessionState
          ğŸ› ï¸ Uses Optuna & CVDataManager
          ğŸ“ Uses TensorBoard for logging
          ğŸ’¾ Writes OptimizationResults to SessionState

      %% --- Phase 3: Evaluation & Reflection ---
      **Phase 3: Final Evaluation & Reflection**
        ğŸ’¡ **EvaluationAgent**
          ğŸ’¾ Reads OptimizationResults from SessionState
          ğŸ’¾ Writes Final Metrics to SessionState
          
        ğŸ’¡ **ReflectionAgent**
          ğŸ“ Uses `reflection_agent.j2`
          ğŸ’¾ Reads *entire* SessionState
          (Decides to loop or terminate)
      
      ğŸ› ï¸ cleanup_analysis_views()
      
  %% --- Unused / Legacy Files ---
  **âš ï¸ Unused / Legacy Files**
    (To be refactored or deleted)
    **`src/utils/memory.py`**
      (Superseded by `SessionState`)
    **`src/utils/pubsub.py`**
      (Orchestrator is now procedural)
    **`src/agents/strategy_team/reasoning_agent.py`**
      (Role covered by Strategy Team GroupChat)
    **`src/agents/strategy_team/optimization_agent.py`**
      (Superseded by `optimization_agent_v2.py`)